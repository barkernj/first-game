<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Sprite Testing Grounds</title>

        <!-- BEGIN IMPORT CSS AND JAVASCRIPT -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="sprite-testing-style.css">
        <!-- END IMPORT CSS AND JAVASCRIPT -->
        <!-- BEGIN ADD FAVICON-->
        <link rel="icon" type="image/png" href="test-images/favicon.png">
        <!-- END ADD FAVICON -->
        <!-- BEGIN CREATE.JS -->
        <script src="http://code.createjs.com/createjs-2013.12.12.min.js"></script>
        <!-- END CREATE.JS -->
        <script>

            var stage;
            var queue;

            console.log("SCRIPT");

            function init() {

                console.log("START INIT");

                stage = new createjs.Stage("myCanvas");
                
                queue = new createjs.LoadQueue(false);
                queue.installPlugin(createjs.Sound);
                queue.addEventListener("complete", handleComplete);
                queue.loadManifest([{ id: "hero", src: "images/hero.png" }, { id: "water-drop", src: "assets/water-drop.mp3"}]);
                
                /* LOAD QUEUE CLASS FOR MULTIPLE SOUND FILE MANAGEMENT
                createjs.Sound.registerSound("assets/water-drop.mp3", "water-drop");
                createjs.Sound.addEventListener("fileload", handleComplete);
                */

                console.log("END INIT");

            }

            function handleComplete(event) {
                var ball = new createjs.Shape();
                ball.addEventListener("click", handleClick);
                ball.graphics.beginFill("#000000").drawCircle(0, 0, 50);
                ball.x = 50;
                ball.y = 200;

                createjs.Tween.get(ball, { loop: true }).to({ x: 450 }, 3000).to({ x: 50 }, 3000);
                createjs.Ticker.addEventListener("tick", tick);

                stage.addChild(ball);

                console.log("COMPLETED");
            }

            function handleClick(event) {
                var bmp = new createjs.Bitmap(queue.getResult("hero"));
                bmp.x = Math.random() * 500;
                bmp.y = Math.random() * 500;

                stage.addChild(bmp);

                createjs.Sound.play("water-drop");
            }

            function tick(event) {
                stage.update();
            }


        </script>
        
    </head>
    <body onload="init()">
        <div class="gameWrapper">
            <div class="title"><h1>Sprite Testing Grounds</h1></div>
            <div id="game" class="layer">
                <canvas id="myCanvas" width="500" height="500">
                    <p>Your browser does not support HTML5!</p>
                </canvas>
            </div>
            <div class="controls">
                <h4>Test Your Sprite!</h4>
            </div>
            <div class="displayArray"></div>
        </div>
        <!--<script type="text/javascript" src="sprite-testing-grounds.js"></script>-->
    </body>
</html>
